---
title: Modelo de seguridad
sidebar_position: 200
sidebar_label: Modelo de seguridad
tags:
  - Portainjerto
  - seguridad
  - powpeg
  - arquitectura
  - federación
  - Clavija de 2 vías
description: Lograr la seguridad en una cadena lateral Powpegged utilizando pruebas de pago
---

Una cadena lateral es una cadena de bloques independiente cuya moneda nativa está vinculada al valor de otra moneda de la cadena de bloques. La vinculación puede ser impuesta por un protocolo o puede ser sintética. Un [2-way peg](/conceptos/powpeg/) es un sistema reforzado por protocolo que permite que dos monedas se intercambien libremente, de forma automática, y sin incurrir en una negociación de precios. En Rootstock, el activo que se puede mover libremente es Bitcoin. Cuando la red donde existen los bitcoins no está clara por el contexto, nos referimos a RBTC a los bitcoins existentes en Rootstock.

En la práctica, cuando se intercambia BTC por RBTC, no se "transfiere" ninguna moneda entre blockchains en una única transacción. La operación de transferencia se divide en dos transacciones. En la primera, algunos BTC se bloquean en Bitcoin y en la segunda se desbloquea la misma cantidad de RBTC en Rootstock. Todo el proceso se denomina peg-in. Cuando el RBTC necesita volver a convertirse en BTC, se produce el proceso inverso: el RBTC se bloquea de nuevo en Rootstock y la misma cantidad de BTC se desbloquea en Bitcoin. El proceso se denomina peg-out.

Si dos plataformas tienen smart-contracts Turing-completos, se pueden crear pegs bidireccionales totalmente minimizados y libres de terceros. Pero dado que Bitcoin no soporta actualmente contratos inteligentes completos de Turing ni opcodes nativos para validar pruebas SPV externas, parte del sistema de 2 vías de Rootstock se basa en un sistema autónomo llamado Powpeg. Este sistema consta de un contrato inteligente llamado Bridge, que controla todas las operaciones, y un conjunto de terceros llamados pegnatories, cada uno de los cuales ejecuta un software llamado nodo Powpeg y un módulo de seguridad de hardware llamado PowHSM. El PowHSM es un dispositivo a prueba de manipulaciones encargado de almacenar una clave privada que forma parte de un esquema multifirma. En el proceso de peg-in, los usuarios envían bitcoins a esta dirección multifirma.  Los PowHSM también son responsables de elegir la mejor cadena de Rootstock basándose en la prueba de trabajo acumulativa, en un modelo de seguridad llamado SPV, y de firmar las transacciones de peg-in de Bitcoin en caso de que el consenso de la blockchain de Rootstock lo requiera. **Ningún pegnatario puede controlar los BTC bloqueados, ni acceder a la clave privada multi-sig almacenada en el PowHSM. Ni siquiera la mayoría de los pegnatorios tiene capacidad para liberar fondos de BTC**. El PowHSM sólo procede a firmar una transacción de peg-out al recibir órdenes de la blockchain de Rootstock, respaldadas por 4000 bloques de confirmación, con una prueba de trabajo acumulativa equivalente actualmente a aproximadamente 100 bloques de bitcoin. Tenga en cuenta que si un usuario transfiere BTC a RBTC y viceversa, normalmente no recibirá bitcoins que estén directamente conectados por UTXOs con el BTC original enviado. Los bitcoins no están bloqueados para usuarios específicos, sino que están bloqueados para su uso en toda la red Rootstock.

El bloqueo y desbloqueo de fondos lo realiza el Powpeg sin intervención humana. Un requisito para formar parte del Powpeg es la capacidad de mantener el dispositivo PowHSM en línea y conectado a la red Rootstock con un alto tiempo de actividad. También es un requisito que los pegnatorios sean capaces de auditar o revisar auditorías de terceros que atestigüen que el software que alimenta el nodo se comporta como se espera. El dispositivo PowHSM está fabricado por una empresa puntera en seguridad de hardware y el firmware ha sido desarrollado por RootstockLabs. El PowHSM proporciona la máxima seguridad de vanguardia para sus claves privadas utilizando un Elemento Seguro (SE).

A partir de enero de 2020, el Powpeg comprende 12 pegnatorios conocidos y altamente seguros. Las principales empresas de Blockchain son actualmente miembros del Powpeg.  A cambio de su trabajo, los pegnatorios reciben el 1% de las comisiones por transacción generadas en Rootstock, con el fin de cubrir los costes de hardware y mantenimiento.

## Novedades para los miembros de Powpeg

El Powpeg se rige por un protocolo escrito que establece cuándo es posible o necesario añadir o eliminar un miembro. Si se cumplen las condiciones para cambiar la composición, un pegnatario puede enviar un mensaje al contrato Puente exigiendo el inicio de un cambio de composición del Powpeg. El cambio implica tres fases: un periodo de votación, un periodo de retraso y un periodo de migración de fondos.  Todas las fases están automatizadas y coordinadas por el contrato Puente, por lo que el proceso es abierto, público y deja una pista de auditoría criptográfica.  Durante la fase de votación, cada pegnatario puede aceptar o rechazar un cambio de composición. Sólo si la mayoría de los pegnatorios acepta el cambio, comienza la siguiente fase. Esta fase consiste en un retraso de una semana impuesto por consenso. El retraso permite a los usuarios transferir los Bitcoins de vuelta a la red Bitcoin en caso de que no confíen en la nueva composición Powpeg. Por último, se activa el cambio de composición y comienza la última fase, que se encarga de la migración de los fondos del antiguo Powpeg al nuevo.

## El futuro

Una de las características que ha sido aceptada por la comunidad es la adición de la atestación pública del firmware de las PowHSM para que todos los usuarios puedan verificar la corrección de las mismas. Otra característica futura es la introducción de keep-alives frecuentes para detectar lo antes posible si un pegnatorio está caído. Existen varias propuestas de la comunidad que compiten entre sí sobre cómo mejorar la seguridad del Powpeg. Si Bitcoin añade opcodes especiales o extensibilidad para validar las pruebas SPV, y una vez que se demuestre que el nuevo sistema es seguro y libre de confianza, el papel del Powpeg ya no será necesario, y la comunidad Rootstock puede implementar los cambios para adaptar Rootstock al nuevo sistema libre de confianza. Por ejemplo, los miembros de la comunidad Rootstock propusieron en 2016 un BIP drivechain, que representa una alternativa al Powpeg minimizada por la confianza.
